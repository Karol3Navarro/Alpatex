{% extends "index/base.html" %}
{% load static %}

{% block body %}
  <h1>Mis Productos</h1>
  <div class="mt-4">
    <a href="{% url 'producto_add_perf' %}" class="btn btn-primary">Agregar Producto</a>
  </div>

  {% if mensaje %}
    <p>{{ mensaje }}</p>
  {% else %}
    <ul class="list-group">
      {% for producto in productos %}
        <li class="list-group-item">
          <div class="d-flex align-items-center">
            <!-- Imagen del producto -->
            <div class="me-3">
              {% if producto.imagen %}
                <img src="{{ producto.imagen.url }}" alt="{{ producto.nombre }}"
                     style="width: 100px; height: 100px; object-fit: cover;">
              {% else %}
                <img src="{% static 'images/default_product.png' %}" alt="Sin imagen"
                     style="width: 100px; height: 100px; object-fit: cover;">
              {% endif %}
            </div>

            <!-- Detalles del producto -->
            <div>
              <strong>{{ producto.nombre }}</strong><br>
              <small>Publicado por: {{ producto.usuario.username }}</small><br>
              <small>Estado: {{ producto.estado }}</small><br>
              <small>Tipo: {{ producto.tipo }}</small><br>
              <small>Contacto: {{ producto.contacto }}</small><br>
              <small>Estado de Revisi√≥n: 
                <span
                  {% if producto.estado_revision == "Pendiente" %} style="color: orange;"
                  {% elif producto.estado_revision == "Rechazado" %} style="color: red;"
                  {% elif producto.estado_revision == "Aceptado" %} style="color: green;"
                  {% endif %}>
                  {{ producto.estado_revision }}
                </span>
              </small><br>

              {% if producto.estado_revision == "Rechazado" %}
                <small><strong>Motivo de Rechazo:</strong> {{ producto.motivo_rechazo }}</small><br>
              {% endif %}
            </div>
          </div>
        </li>
      {% endfor %}
    </ul>
  {% endif %}

{% endblock %}
